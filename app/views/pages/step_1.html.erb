<h1 class="text-4xl font-bold mb-3">What type of heat pump is right for my home?</h1>

<% if user_signed_in? %>

<% if @response %>
  <p>Depending on the size of your property, you will need more or less power to warm it up.</p>

  <p class="font-bold my-2">Recommended heat pump size:</p>
  <p class="text-xl font-bold"><%= heat_pump_size(@response) %></p>

  <p class="mt-6 italic text-gray-600">Q for team: Should users be able to edit their responses?</p>

<% else %>
  <div class="max-w-prose my-5">
    <iframe
      data-tally-src="https://tally.so/embed/3y4Z0B?user_email=<%= current_user.email %>&alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1"
      loading="lazy"
      width="100%"
      height="276"
      frameborder="0"
      marginheight="0"
      marginwidth="0"
      title="What are my heat pump options?"
    ></iframe>
    <script>
      var d = document,
        w = "https://tally.so/widgets/embed.js",
        v = function () {
          "undefined" != typeof Tally
            ? Tally.loadEmbeds()
            : d
                .querySelectorAll("iframe[data-tally-src]:not([src])")
                .forEach(function (e) {
                  e.src = e.dataset.tallySrc;
                });
        };
      if ("undefined" != typeof Tally) v();
      else if (d.querySelector('script[src="' + w + '"]') == null) {
        var s = d.createElement("script");
        (s.src = w), (s.onload = v), (s.onerror = v), d.body.appendChild(s);
      }
    </script>
  </div>
<% end %>

<% else %>

  <p>Please <%= link_to 'login', new_user_session_path %> or <%= link_to 'register', new_user_registration_path %> to complete</p>

<% end %>